<link rel="ractive" href="./ItemColor.html">
<link rel="ractive" href="./ToggleWithItemColor.html">
<link rel="ractive" href="./Tabs.html">
<link rel="ractive" href="./Input.html">
<link rel="ractive" href="./Toggle.html">

<div id="content">
  {{#if platform == 'aplite'}}
    <Tabs source="{{ dark_mode_source }}" active_tab="{{ dark_mode }}" header="Color theme"/>
  {{/if}}
  {{#if platform != 'aplite'}}
  <ItemColor color="{{ hour_hand_color }}" label="Hour hand color"/>
  <ToggleWithItemColor toggleLabel="Use rainbow minute hand" toggleValue="{{ rainbow_mode }}" colorItemValue="{{ minute_hand_color }}" colorItemLabel="Minute hand color" footer="Overrides color selection for the minute hand" toggleFirst/>
  <ItemColor color="{{ time_color }}" label="Numbers and ticks color"/>
  <ItemColor color="{{ background_color }}" label="Background color"/>
  <Toggle label="Vibrate every full hour" value="{{ vibrate_on_the_hour }}" footer="Off during sleep tracked with Pebble Health" />
  <Toggle label="Use 24h format" value="{{ military_time }}"/>
  <div class="section">
    <div>Date</div>
  </div>
  {{/if}}
  {{#if platform == 'aplite'}}
  <Toggle label="Show date" value="{{ date_displayed }}" inverted/>
  {{else}}
  <ToggleWithItemColor toggleLabel="Show date" toggleValue="{{ date_displayed }}" colorItemValue="{{ date_color }}" colorItemLabel="Date color" inverted/>
  {{/if}}
  <div class="section">
    <div>Additional data</div>
  </div>
  {{#if platform != 'aplite'}}
  <ItemColor color="{{ info_color }}" label="Bluetooth and weather color"/>
  {{/if}}
  <div class="subsection">
    <div>Bluetooth</div>
  </div>
  <Tabs source="{{ bluetooth_source }}" active_tab="{{ bluetooth_icon }}" header="When bluetooth is disconnected, show"/>
  <div class="subsection">
    <div>Weather</div>
  </div>
  <Toggle value="{{ weather_enabled }}" label="Show weather"/>
  <Input header="Fixed location (empty to use phone location)" placeholder="Ex: Dublin,Ireland" value="{{ location }}"/>
  <Tabs source="{{ temperature_unit_source }}" active_tab="{{ temperature_unit }}" header="Temperature unit"/>
  <Tabs source="{{ refresh_rate_source }}" active_tab="{{ refresh_rate }}" header="Refresh rate"/>
  <div class="donation">
    Minimalin is open source software. If you want, you can easily make a <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ZJYBKJHT2EXT4">donation here</a>.
  </div>

  <div class="item-container">
    <div id="reset_button_container" class="button-container">
      <input id="reset_button" type="button" class="item-button" value="RESET DEFAULTS" on-click="reset-defaults">
    </div>
  </div>
</div>
<div id="footer" class="item-container">
  <div class="button-container">
    <input id="submit_button" type="button" class="item-button" value="SAVE" on-click="save">
  </div>
</div>
<style>
 @font-face{
   font-family:"Nupe-CondensedRegular";
   src:url("./fonts/Nupe.ttf") format("truetype");
   font-weight:normal;
   font-style:normal;
   font-variant:normal;
 }

 * {
   font-family: sans-serif;
 }

 #content {
   margin-top: 10px;
   padding-bottom: 40px;
 }

 .hidden {
   visibility: hidden;
 }

 .section {
   background-color: #eaeaea;
   height: 30px;
 }

 .section div {
   margin-top: 25px;
   margin-left: 10px;
   font-size: 14pt;
   font-weight: bold;
 }

 .subsection {
   height: 50px;
 }

 .subsection div {
   background: #F7F7F7;
   height: 100%;
   padding-top: 20px;
   padding-left: 10px;
   font-size: 14pt;
   font-weight: bold;
 }

 .item-container {
   margin-top: 0px;
 }

 .donation {
   padding: 10px 10px 0px 10px;
   font-size: 0.7em;
 }

 #reset_button_container {
   padding: 10px;
 }

 #reset_button {
   width: 100%;
   color: black;
   background-color: #c1c1c1;
   height: 40px;
 }

 #preview {
   position: fixed;
   z-index: 999;
   top:      0;
   left:     0;
   width:    100%;
   background-color: rgb(234, 234, 234);
   border-bottom: 1px solid #dedede;
   box-shadow: 0px 5px 5px rgba(0,0,0,0.12);
   padding: 10px 0px;
 }

 #preview svg {
   display:      block;
   margin:       0px;
   margin-left:  auto;
   margin-right: auto;
   width:        50%;
   max-width:    355px;
   max-height:   355px;
 }

 #preview_spacer {
   padding: 10px 0px;
   width: 50vw;
   height: 50vw;
   max-width:    355px;
   max-height:   355px;
 }

 #footer {
   position: fixed;
   z-index: 999;
   bottom: 0;
   left:0;
   width: 100%;
   box-shadow: 0px -3px 3px rgba(0,0,0,0.12);
 }

 #footer input {
   height: 40px;
 }

 #footer input {
   width: 100%;
   border-radius: 0;
 }
</style>

<script>
 component.exports = {
   computed: {
     info_text: function(){
       var info;
       switch(this.get("bluetooth_icon")){
       case 1:
         info = "z";
         break;
       case 2:
         info = "Z";
         break;
       default:
         info = "";
       }
       if(this.get("weather_enabled")){
         info += " b18Â°";
       }
       return info;
     },
     dark_mode_source: function(){
       return [{ label: "Dark"}, { label: "Light"}]
     },
     bluetooth_source: function(){
       return [
         { label: "No icon" },
         { label: "Bluetooth" },
         { label: "Broken heart" }
       ];
     },
     temperature_unit_source: function(){
       return [
         { label: "Celsius" },
         { label: "Fahrenheit" }
       ];
     },
     refresh_rate_source: function(){
       return [
         { label: "5 min" },
         { label: "20 min" },
         { label: "40 min" }
       ];
     },
     time_format_source: function(){
       return [
         { label: "12 hour" },
         { label: "24 hour" }
       ];
     },
     _hour_hand_color: function(){
       if(this.get("platform") != "aplite"){
           return this.get("hour_hand_color");
       }
       return this.foregroundColor();
     },
     _minute_hand_color: function(){
       if(this.get("platform") != "aplite"){
           return this.get("minute_hand_color");
       }
       return this.foregroundColor();
     },
     _info_color: function(){
       if(this.get("platform") != "aplite"){
           return this.get("info_color");
       }
       return this.foregroundColor();
     },
     _date_color: function(){
       if(this.get("platform") != "aplite"){
           return this.get("date_color");
       }
       return this.foregroundColor();
     },
     _time_color: function(){
       if(this.get("platform") != "aplite"){
           return this.get("time_color");
       }
       return this.foregroundColor();
     },
     _background_color: function(){
       if(this.get("platform") != "aplite"){
           return this.get("background_color");
       }
       return this.backgroundColor();
     }
   },
   backgroundColor: function(){
     if(this.get("dark_mode") == 0){
       return "#000000";
     }
     return "#FFFFFF";
   },
   foregroundColor: function(){
     if(this.get("dark_mode") == 0){
         return "#FFFFFF";
     }
     return "#000000";
   },
   onrender: function(){
     this.on('reset-defaults', function() {
       this.set(this.get('defaults'));
     });
   }
 }
</script>
